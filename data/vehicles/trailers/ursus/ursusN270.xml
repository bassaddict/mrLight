<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<vehicle type="manureSpreader">
    <annotation>Copyright (C) GIANTS Software GmbH, All Rights Reserved.</annotation>
    <name>
        <en>Ursus N270</en>
        <de>Ursus N270</de>
    </name>
    <typeDesc>$l10n_TypeDesc_ManureSpreader</typeDesc>
    <filename>data/vehicles/trailers/ursus/ursusN270.i3d</filename>

    <size width="4" length="11" />

    <powerConsumer ptoRpm="450" neededPtoPower="45"/>
    <speedLimit value="20" />

    <wheels autoRotateBackSpeed="2.0">
        <wheel  restLoad="1.6" repr="0"                 radius="0.578" initialCompression="40" suspTravel="0.15" spring="30" damper="20" frictionScale="1.5" mass="0.21" />
        <wheel  restLoad="1.6" repr="1" driveNode="1|0" radius="0.578" initialCompression="40" suspTravel="0.15" spring="30" damper="20" frictionScale="1.5" mass="0.21" />
        <wheel  restLoad="1.7" repr="2"                 radius="0.578" initialCompression="40" suspTravel="0.15" spring="30" damper="20" frictionScale="1.5" mass="0.21" hasTyreTracks="true" tyreTrackAtlasIndex="2" steeringAxleScale="-0.7" steeringAxleRotMax="20" steeringAxleRotMin="-20" />
        <wheel  restLoad="1.7" repr="3"                 radius="0.578" initialCompression="40" suspTravel="0.15" spring="30" damper="20" frictionScale="1.5" mass="0.21" hasTyreTracks="true" tyreTrackAtlasIndex="2" steeringAxleScale="-0.7" steeringAxleRotMax="20" steeringAxleRotMin="-20" />
    </wheels>

    <dynamicallyLoadedParts>
        <dynamicallyLoadedPart node="0|0" linkNode="0>0"   filename="$data/vehicles/wheels/trelleborg/twinRadial_600_50R22_5.i3d" />
        <dynamicallyLoadedPart node="0|1" linkNode="0>1|0" filename="$data/vehicles/wheels/trelleborg/twinRadial_600_50R22_5.i3d" />
        <dynamicallyLoadedPart node="0|0" linkNode="0>2"   filename="$data/vehicles/wheels/trelleborg/twinRadial_600_50R22_5.i3d" />
        <dynamicallyLoadedPart node="0|1" linkNode="0>3"   filename="$data/vehicles/wheels/trelleborg/twinRadial_600_50R22_5.i3d" />
    </dynamicallyLoadedParts>

    <brakeForce>1.5</brakeForce>

    <steeringAxleAngleScale startSpeed="5" endSpeed="30" />

    <lights count="1">
        <light1 index="5" />
    </lights>

    <lightCoronas>
        <lightCorona index="17" />
    </lightCoronas>

    <brakeLights>
        <brakeLight index="0>19" />
    </brakeLights>

    <turnSignals>
        <turnSignalLeft index="0>23|0" />
        <turnSignalRight index="0>23|1" />
    </turnSignals>

    <inputAttacherJoints>
        <inputAttacherJoint index="4" jointType="trailerLow" indexPTO="0>18" />
    </inputAttacherJoints>

    <workAreas>
        <workArea startIndex="0>13" widthIndex="0>14" heightIndex="0>15" type="sprayer" disableBackwards="false" />
    </workAreas>

    <aiLeftMarker index="0>28" />
    <aiRightMarker index="0>29" />
    <aiBackMarker index="0>30" />
    <aiForceTurnNoBackward value="true" />

    <capacity>15500</capacity>

    <shovelFillTrigger index="0>21"/>

    <spraySound file="$data/vehicles/trailers/manureSpreader.wav" pitchOffset="1" volume="0.7"/>

    <turnedOnRotationNodes>
        <turnedOnRotationNode index="11|0" type="manureSpreader" rotSpeed="-1200" turnOnFadeTime="1" turnOffFadeTime="2" />
        <turnedOnRotationNode index="11|1" type="manureSpreader" rotSpeed="1200" turnOnFadeTime="1" turnOffFadeTime="2" />
        <turnedOnRotationNode index="11|2" type="manureSpreader" rotSpeed="-1200" turnOnFadeTime="1" turnOffFadeTime="2" />
        <turnedOnRotationNode index="11|3" type="manureSpreader" rotSpeed="1200" turnOnFadeTime="1" turnOffFadeTime="2" />
    </turnedOnRotationNodes>

    <fillSound file="$data/vehicles/shared//manureFillSound.wav" pitchOffset="1.0" volume="1.5" />

    <fillVolumes>
        <fillVolume index="0>7|0" />
    </fillVolumes>

    <fillVolumeHeights>
        <fillVolumeHeight fillVolumeId="1">
            <refNode index="0>31|0" />
            <refNode index="0>31|1" />
            <node index="0>16" baseScale="1 0.1 1" transAxis="0 0 0" scaleAxis="0 1 0" />
        </fillVolumeHeight>
    </fillVolumeHeights>

    <fillVolumeHeightRefNode index="0>31|0" />

    <fillVolumeDischargeInfo index="0>24" width="1.4" length="1.0" alsoUseLoadInfoForDischarge="true" loadInfoFillFactor="0.98" loadInfoSizeScale="3 3" />

    <fillVolumeLoadInfo index="0>27" width="1.4" length="1.0" />

    <sprayUsages>
        <sprayUsage fillType="manure" litersPerSecond="125" />
    </sprayUsages>

    <fillTypes fillTypes="manure" />

    <sprayParticleSystems>
        <sprayParticleSystem type="manure" node="0>16|0" psRootNode="0" foldMinLimit="0.6" foldMaxLimit="1.0" file="$data/vehicles/particleAnimations/ursus/ursusN270Particles.i3d" />
    </sprayParticleSystems>

    <doorAnimation name="openDoor" openSpeedScale="1.5" closeSpeedScale="-1" />

    <support animationName="moveSupport" />

    <animations>
        <animation name="openDoor">
            <part node="0>10" startTime="0" endTime="4" startRot="0 0 0" endRot="65 0 0" />
        </animation>

        <!-- move support wheel down/up -->
        <animation name="moveSupport">
            <part node="0>1|1" startTime="0" endTime="0.05" visibility="false" />
            <part node="0>22" startTime="0" endTime="0.05" visibility="true" />
            <part node="0>1|1" startTime="0.05" endTime="0.1" visibility="true" />
            <part node="0>22" startTime="0.05" endTime="0.1" visibility="false" />
            <part node="6" startTime="0" duration="0.5" startTrans="0.22577 0.36464 2.86526" endTrans="0.22577 0.0 2.86526" />
            <part node="0>12" startTime="0" duration="0.5" startRot="720 0 0" endRot="0 0 0" />
        </animation>
    </animations>

    <movingTools>
        <!-- door -->
        <movingTool index="0>10">
            <!-- door cylinder -->
            <dependentPart index="0>8" />
            <!-- door -->
            <dependentPart index="0>9" />
        </movingTool>
    </movingTools>

    <movingParts>
        <movingPart index="0>9" referencePoint="0>10|0" localReferencePoint="0>9|0" referenceFrame="0>20" invertZ="true">
            <dependentPart index="0>10|0" />
        </movingPart>
        <!-- door cylinder -->
        <movingPart index="0>8" referencePoint="0>10|1" referenceFrame="0>10|1" invertZ="false">
            <translatingPart index="0>8|0" />
        </movingPart>
        <!-- back door lift link -->
        <movingPart index="0>10|0" referencePoint="0>9|0" referenceFrame="0>20" invertZ="false" scaleZ="true"/>
    </movingParts>

    <manureSpreaderScrollers>
        <scrollerNode index="0>26|1" shaderParameterName="scrollPosition" scrollSpeed="0.07" scrollLength="5.744" shaderParameterComponent="1" turnOnFadeTime="1" turnOffFadeTime="1"/>
        <scrollerNode index="0>26|0" shaderParameterName="offsetUV"       scrollSpeed="0.3"                       shaderParameterComponent="1" turnOnFadeTime="1" turnOffFadeTime="1"/>
    </manureSpreaderScrollers>

    <driveGroundParticleSystems>
        <driveGroundParticleSystem file="$data/vehicles/particleAnimations/shared/drivingParticleSystem.i3d" wheel="1" />
        <driveGroundParticleSystem file="$data/vehicles/particleAnimations/shared/drivingParticleSystem.i3d" wheel="2" />
        <driveGroundParticleSystem file="$data/vehicles/particleAnimations/shared/drivingParticleSystem.i3d" wheel="3" />
        <driveGroundParticleSystem file="$data/vehicles/particleAnimations/shared/drivingParticleSystem.i3d" wheel="4" />
    </driveGroundParticleSystems>

    <washable dirtDuration="60" washDuration="1" workMultiplier="20" />

    <components count="1">
        <component1 centerOfMass="0 0.6 -1" solverIterationCount="10" />
    </components>

    <schemaOverlay file="$dataS2/menu/schemas/implementSchema.png" fileSelected="$dataS2/menu/schemas/implementSchemaSelected.png" fileTurnedOn="$dataS2/menu/schemas/implementSchemaTurnedOn.png" fileSelectedTurnedOn="$dataS2/menu/schemas/implementSchemaSelectedTurnedOn.png" width="0.5" height="0.5" attacherJointPosition="0 0"/>

</vehicle>
